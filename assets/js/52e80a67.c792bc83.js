"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[509],{2720(e,n,t){t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>f,default:()=>v,frontMatter:()=>d,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"reuse-map-example","title":"reuseMap \uc608\uc81c","description":"reuseMap\uc740 \ub3d9\uc77c\ud55c id\ub97c \uac00\uc9c4 \uc9c0\ub3c4 \uc778\uc2a4\ud134\uc2a4\ub97c \uc7ac\uc0ac\uc6a9\ud569\ub2c8\ub2e4.","source":"@site/examples/reuse-map-example.mdx","sourceDirName":".","slug":"/reuse-map-example","permalink":"/react-naver-maps/examples/reuse-map-example","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"examplesSidebar","previous":{"title":"\ub798\uc2a4\ud130 \uc9c0\ub3c4 \uc608\uc81c","permalink":"/react-naver-maps/examples/raster-map-example"}}');var r=t(4848),s=t(8453),c=t(6540),a=t(6283),u=t(9753);const i=({ncpKeyId:e=u.N})=>{const[n,t]=(0,c.useState)(!0),[o,s]=(0,c.useState)(null),[i,l]=(0,c.useState)(null),d=(0,c.useRef)(void 0),f=(0,c.useRef)(void 0),p=(0,c.useCallback)(e=>{d.current=e,l(e??null)},[]);return(0,c.useEffect)(()=>{n&&i&&(f.current?s(i===f.current):s(null),f.current=i)},[i,n]),(0,r.jsxs)(a.KU,{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,r.jsx)("button",{onClick:()=>t(e=>!e),children:"toggle"}),null!==o&&(0,r.jsxs)("span",{children:["same instance: ",String(o)]})]}),(0,r.jsx)("div",{style:{width:"100%",height:360,marginTop:12},children:n&&(0,r.jsx)(a.T5,{id:"reuse",reuseMap:!0,ncpKeyId:e,ref:p})})]})};var l=t(8478);const d={sidebar_position:9},f="reuseMap \uc608\uc81c",p={},m=[{value:"\ub77c\uc774\ube0c \uc608\uc81c",id:"\ub77c\uc774\ube0c-\uc608\uc81c",level:2},{value:"\ucf54\ub4dc",id:"\ucf54\ub4dc",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"reusemap-\uc608\uc81c",children:"reuseMap \uc608\uc81c"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"reuseMap"}),"\uc740 \ub3d9\uc77c\ud55c ",(0,r.jsx)(n.code,{children:"id"}),"\ub97c \uac00\uc9c4 \uc9c0\ub3c4 \uc778\uc2a4\ud134\uc2a4\ub97c \uc7ac\uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n\ud1a0\uae00\ub85c \uc5b8\ub9c8\uc6b4\ud2b8\ud588\ub2e4\uac00 \ub2e4\uc2dc \ub9c8\uc6b4\ud2b8\ud574\ub3c4 \uac19\uc740 \uc778\uc2a4\ud134\uc2a4\ub97c \uc4f0\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.h2,{id:"\ub77c\uc774\ube0c-\uc608\uc81c",children:"\ub77c\uc774\ube0c \uc608\uc81c"}),"\n",(0,r.jsx)(l.A,{children:()=>(0,r.jsx)(i,{})}),"\n",(0,r.jsx)(n.h2,{id:"\ucf54\ub4dc",children:"\ucf54\ub4dc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { useCallback, useEffect, useRef, useState } from "react";\nimport { Map, MapProvider } from "@rousen/react-naver-maps";\n\nexport default function ReuseMapExample() {\n  const [visible, setVisible] = useState(true);\n  const mapRef = useRef<naver.maps.Map>();\n  const lastRef = useRef<naver.maps.Map>();\n  const [mapInstance, setMapInstance] = useState<naver.maps.Map | null>(null);\n\n  const handleMapRef = useCallback((instance?: naver.maps.Map) => {\n    mapRef.current = instance;\n    setMapInstance(instance ?? null);\n  }, []);\n\n  useEffect(() => {\n    if (!visible || !mapInstance) return;\n    if (lastRef.current) {\n      console.log("same instance:", mapInstance === lastRef.current);\n    }\n    lastRef.current = mapInstance;\n  }, [mapInstance, visible]);\n\n  return (\n    <MapProvider>\n      <button onClick={() => setVisible((v) => !v)}>toggle</button>\n      <div style={{ width: "100%", height: 360, marginTop: 12 }}>\n        {visible && (\n          <Map id="reuse" reuseMap ncpKeyId="your-ncp-key-id" ref={handleMapRef} />\n        )}\n      </div>\n    </MapProvider>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\ucf58\uc194\uc5d0 ",(0,r.jsx)(n.code,{children:"same instance: true"}),"\uac00 \ucd9c\ub825\ub418\uba74 \uc7ac\uc0ac\uc6a9\uc774 \uc815\uc0c1 \ub3d9\uc791\ud569\ub2c8\ub2e4."]})]})}function v(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},6283(e,n,t){t.d(n,{KU:()=>c,M_:()=>w,Ro:()=>M,T5:()=>f,hJ:()=>g,jl:()=>j,ko:()=>a,pH:()=>m,qZ:()=>L,tS:()=>E});var o=t(4848),r=t(6540);const s=(0,r.createContext)({maps:{},onMount:()=>{},onUnmount:()=>{},getParkingContainer:()=>null}),c=({children:e})=>{const[n,t]=(0,r.useState)({}),c=(0,r.useRef)(null),a=(0,r.useCallback)(()=>c.current,[]),u=(0,r.useCallback)((e,n="default")=>{t(t=>({...t,[n]:e}))},[]),i=(0,r.useCallback)((e="default",n)=>{n?.keep||t(n=>{const t={...n};return delete t[e],t})},[]),l=(0,r.useMemo)(()=>({maps:n,onMount:u,onUnmount:i,getParkingContainer:a}),[n,u,i,a]);return(0,o.jsxs)(s.Provider,{value:l,children:[(0,o.jsx)("div",{ref:c,"aria-hidden":!0,style:{position:"absolute",left:-1e5,top:-1e5,width:0,height:0,overflow:"hidden",pointerEvents:"none",visibility:"hidden"}}),e]})},a=()=>{const{maps:e}=(0,r.useContext)(s),n=(0,r.useContext)(u);return(0,r.useMemo)(()=>n?{...e,current:n}:e,[e,n])},u=(0,r.createContext)(void 0);let i=null;function l(e){return"undefined"==typeof window?Promise.reject(new Error("Naver Maps SDK can only be loaded in browser.")):window.naver?.maps?Promise.resolve(window.naver.maps):i||(i=new Promise((n,t)=>{const o=e.scriptId??"naver-maps-sdk",r=document.getElementById(o),s=new Set((e.submodules??[]).filter(Boolean));!1!==e.useGL&&s.add("gl");const c=Array.from(s),a=c.includes("gl"),u=a?`__naverMapsOnLoad__${o.replace(/[^a-zA-Z0-9_]/g,"_")}`:null,i=()=>{if(u&&window[u])try{delete window[u]}catch{window[u]=void 0}},l=()=>{window.naver?.maps?n(window.naver.maps):t(new Error("Naver Maps loaded but window.naver.maps is missing."))};if(r)return a&&u?(window[u]=()=>{i(),l()},void(window.naver?.maps&&(i(),n(window.naver.maps)))):(r.addEventListener("load",l,{once:!0}),void r.addEventListener("error",()=>t(new Error("Failed to load Naver Maps SDK.")),{once:!0}));const d=document.createElement("script");d.id=o;const f=new URL("https://oapi.map.naver.com/openapi/v3/maps.js");f.searchParams.set("ncpKeyId",e.ncpKeyId),c.length&&f.searchParams.set("submodules",c.join(",")),a&&u&&(window[u]=()=>{i(),l()},f.searchParams.set("callback",u)),d.src=f.toString(),d.async=!0,d.type="text/javascript",d.onload=()=>{a||l()},d.onerror=()=>{i(),t(new Error("Failed to load Naver Maps SDK."))},document.head.appendChild(d)}).catch(e=>{throw i=null,e}),i)}const d={init:"onInit",bounds_changed:"onBoundsChanged",dragstart:"onDragStart",dragend:"onDragEnd",idle:"onIdle",resize:"onResize",scroll:"onScroll",addLayer:"onAddLayer",center_changed:"onCenterChanged",centerPoint_changed:"onCenterPointChanged",click:"onClick",dbclick:"onDbclick",doubletap:"onDoubletap",mapType_changed:"onMapTypeChanged",mapTypeId_changed:"onMapTypeIdChanged",mousedown:"onMousedown",mousemove:"onMousemove",mouseout:"onMouseout",mouseover:"onMouseover",mouseup:"onMouseup",panning:"onPanning",pinch:"onPinch",pinch_start:"onPinchStart",projection_changed:"onProjectionChanged",removeLayer:"onRemoveLayer",size_changed:"onSizeChanged",tap:"onTap",tilesloaded:"onTilesLoaded",touchend:"onTouchEnd",touchstart:"onTouchStart",touchmove:"onTouchMove",twofintertap:"onTwoFingerTap",zoom_changed:"onZoomChanged",zoomend:"onZoomEnd",zoomstart:"onZoomStart"},f=(0,r.forwardRef)(({id:e,mapTypeId:n="normal",ncpKeyId:t,children:c,initialOptions:a={},submodules:i=[],style:f,disableGL:p=!1,reuseMap:m=!1,center:h,zoom:v,...g},y)=>{const E=(0,r.useContext)(s),b=(0,r.useRef)(null),[M,k]=(0,r.useState)(),w=(0,r.useRef)(void 0),{isScriptLoaded:x}=(({ncpKeyId:e,submodules:n,disableGL:t})=>{const[o,s]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>JSON.stringify({ncpKeyId:e,submodules:n}),[e,n]);return(0,r.useEffect)(()=>{let e=!1;const{submodules:n,ncpKeyId:o}=JSON.parse(c),r=!t;return(async()=>{try{await l({ncpKeyId:o,submodules:n,useGL:r}),e||s(!0)}catch(t){if(!r)return;console.warn("Naver Maps GL load failed, retrying without GL",t);try{await l({ncpKeyId:o,submodules:n,useGL:!1}),e||s(!0)}catch(c){e||console.error("Failed to load Naver Maps SDK",c)}}})(),()=>{e=!0}},[c,t]),{isScriptLoaded:o}})({ncpKeyId:t,submodules:i,disableGL:p});(0,r.useEffect)(()=>{if(!x||!b.current)return;if("current"===e)throw new Error("id cannot be 'current' use other id");const n=e??"default",t=E.maps[n],o=e=>{const n=E.getParkingContainer(),t=e.getElement();n&&t&&t.parentElement===b.current&&n.appendChild(t)};if(m&&t){const e=t.getElement();if(e&&b.current&&e.parentElement!==b.current){for(;b.current.firstChild;)b.current.removeChild(b.current.firstChild);b.current.appendChild(e)}return t.refresh(),k(t),w.current=t,()=>{o(t),E.onUnmount(n,{keep:!0}),w.current=void 0}}const r=new naver.maps.Map(b.current,{...a,gl:!p});return k(r),E.onMount(r,n),w.current=r,()=>{if(m)return o(r),E.onUnmount(n,{keep:!0}),void(w.current=void 0);E.onUnmount(n),w.current=void 0,queueMicrotask(()=>{r.destroy()})}},[x,m,e]);const j=(0,r.useRef)({});(0,r.useEffect)(()=>{const e={};Object.keys(d).forEach(n=>{const t=g[d[n]];"function"==typeof t&&(e[n]=t)}),j.current=e},[g]),(0,r.useEffect)(()=>{M&&M.setMapTypeId(n)},[M,n]),(0,r.useEffect)(()=>{if(!M)return;const e=[];return Object.keys(d).forEach(n=>{const t=naver.maps.Event.addListener(M,n,(...e)=>{j.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[M]);const O=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{if(!M||!h)return;const e=h instanceof naver.maps.LatLng?h:new naver.maps.LatLng(h);O.current?.equals(e)||(M.setCenter(e),O.current=e)},[M,h]),(0,r.useEffect)(()=>{M&&v&&void 0!==v&&M.setZoom(v,!0)},[M,v]),(0,r.useImperativeHandle)(y,()=>w.current,[M]);const C=(0,r.useMemo)(()=>({width:"100%",height:"100%",...f}),[f]);return(0,o.jsx)("div",{id:e,style:C,ref:b,children:M&&(0,o.jsx)(u.Provider,{value:M,children:c})})});f.displayName="Map";const p={click:"onClick",position_changed:"onPositionChanged",rightclick:"onRightclick",title_changed:"onTitleChanged",touchend:"onTouchEnd",touchstart:"onTouchStart",visible_changed:"onVisibleChanged",zindex_changed:"onZIndexChanged",clickable_changed:"onClickableChanged",dblclick:"onDblclick",draggable_changed:"onDraggableChanged",icon_changed:"onIconChanged",icon_loaded:"onIconLoaded",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut"},m=(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(p).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Marker(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]),(0,r.useEffect)(()=>{if(!o)return;const e=u.position;e&&o.setPosition(e)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.animation;o.setAnimation(e??null)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.clickable;o.setClickable(e??!1)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.zIndex;void 0!==e&&o.setZIndex(e)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.cursor;o.setCursor(e??"")},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.draggable;o.setDraggable(e??!1)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.icon;e&&o.setIcon(e)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.shape;e&&o.setShape(e)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.title;e&&o.setTitle(e)},[o,u]),(0,r.useEffect)(()=>{if(!o)return;const e=u.visible;o.setVisible(e??!0)},[o,u]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(p).forEach(n=>{const t=c[p[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(p).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null}),h={"center-center":"translate(-50%, -50%)","center-left":"translate(-100%, -50%)","center-right":"translate(0, -50%)","top-center":"translate(-50%, 0)","top-left":"translate(-100%, 0)","top-right":"translate(0, 0)","bottom-center":"translate(-50%, -100%)","bottom-left":"translate(-100%, -100%)","bottom-right":"translate(0, -100%)"},v=()=>class extends naver.maps.OverlayView{constructor({element:e,position:n,zIndex:t,anchor:o="center-center"}){super(),this._element=e,this._position=n,this.zIndex=t,this.anchor=o}getPosition(){return this._position}setPosition(e){this._position=e,this.draw()}setZIndex(e){this.zIndex=e,this.draw()}setAnchor(e){this.anchor=e,this.draw()}onAdd(){this.getPanes().overlayImage.append(this._element)}draw(){if(!this.getMap())return;const e=this.getProjection().fromCoordToOffset(new naver.maps.LatLng(this.getPosition()));this._element.style.position="absolute",this._element.style.zIndex=this.zIndex?.toString()??"auto",this._element.style.left=`${e.x}px`,this._element.style.top=`${e.y}px`,this._element.style.transform=h[this.anchor??"bottom-center"]}destroy(){this._element.remove()}onRemove(){this.destroy()}},g=({children:e,...n})=>{const{current:t}=a(),s=(0,r.useRef)(null),[c,u]=(0,r.useState)();return(0,r.useEffect)(()=>{if(!t||!s.current)return;const e=new(v())({element:s.current,...n});return e.setMap(t),u(e),()=>{e.destroy()}},[t]),(0,r.useEffect)(()=>{c&&c.setPosition(n.position)},[c,n.position]),(0,r.useEffect)(()=>{c&&c.setZIndex(n.zIndex)},[c,n.zIndex]),(0,r.useEffect)(()=>{c&&c.setAnchor(n.anchor)},[c,n.anchor]),(0,o.jsx)("div",{children:(0,o.jsx)("div",{ref:s,children:e})})},y={click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},E=(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(y).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Polygon(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]),(0,r.useEffect)(()=>{o&&o.setOptions(u)},[o,u]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(y).forEach(n=>{const t=c[y[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(y).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null});E.displayName="Polygon";const b={click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},M=(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(b).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Polyline(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(b).forEach(n=>{const t=c[b[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(b).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null});M.displayName="Polyline";const k={click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},w=(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(k).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Rectangle(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]),(0,r.useEffect)(()=>{o&&o.setOptions(u)},[o,u]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(k).forEach(n=>{const t=c[k[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(k).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null});w.displayName="Rectangle";const x={click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},j=(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(x).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Circle(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]),(0,r.useEffect)(()=>{o&&o.setOptions(u)},[o,u]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(x).forEach(n=>{const t=c[x[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(x).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null});j.displayName="Circle";const O={click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"};(0,r.forwardRef)((e,n)=>{const{current:t}=a(),[o,s]=(0,r.useState)(),c={},u={};Object.keys(e).forEach(n=>{const t=n;if(Object.values(O).includes(t)){const n=e[t];void 0!==n&&(c[t]=n)}else{const t=e[n];void 0!==t&&(u[n]=t)}}),(0,r.useEffect)(()=>{if(!t)return;const e=new naver.maps.Ellipse(u);return s(e),e.setMap(t),()=>{t&&e.setMap(null)}},[t]),(0,r.useEffect)(()=>{o&&o.setOptions(u)},[o,u]);const i=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(O).forEach(n=>{const t=c[O[n]];"function"==typeof t&&(e[n]=t)}),i.current=e},[c]),(0,r.useEffect)(()=>{if(!o)return;const e=[];return Object.keys(O).forEach(n=>{const t=naver.maps.Event.addListener(o,n,(...e)=>{i.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[o]),(0,r.useImperativeHandle)(n,()=>o,[o]),null}).displayName="Ellipse";const C={addfeature:"onAddFeature",removefeature:"onRemoveFeature",setfeature:"onSetFeature",setgeometry:"onSetGeometry",setproperty:"onSetProperty",removeproperty:"onRemoveProperty",click:"onClick",dblclick:"onDblclick",rightclick:"onRightclick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove"},R=e=>{if(null===e||"object"!=typeof e)return!1;if(Array.isArray(e))return!1;const n=Object.getPrototypeOf(e);return n===Object.prototype||null===n},I=(e,n,t=new WeakMap)=>{if(Object.is(e,n))return!0;if(typeof e!=typeof n)return!1;if("function"==typeof e)return!1;if(null===e||null===n)return!1;if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!==n.length)return!1;for(let o=0;o<e.length;o+=1)if(!I(e[o],n[o],t))return!1;return!0}if(R(e)){if(!R(n))return!1;const o=t.get(e);if(o?.has(n))return!0;o?o.add(n):t.set(e,new WeakSet([n]));const r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(const c of r){if(!Object.prototype.hasOwnProperty.call(n,c))return!1;if(!I(e[c],n[c],t))return!1}return!0}return!1},L=({type:e,data:n,autoStyle:t=!0,style:o,onLoad:s,onError:c,...u})=>{const{current:i}=a(),[l,d]=(0,r.useState)(),f=(0,r.useRef)(),p=(0,r.useRef)(),m=(0,r.useMemo)(()=>e=>{e.getAllFeature().forEach(n=>{e.removeFeature(n)})},[]);(0,r.useEffect)(()=>{if(!i)return;const e=new naver.maps.Data;return e.setMap(i),d(e),()=>{e.setMap(null),d(void 0)}},[i]),(0,r.useEffect)(()=>{if(!l)return;const o=new AbortController;return(async()=>{try{if(m(l),"string"==typeof n){const r=await fetch(n,{signal:o.signal});if(!r.ok)throw new Error(`Failed to fetch data layer: ${r.status}`);if("geojson"===e){const e=await r.json();return void(o.signal.aborted||(l.addGeoJson(e,t),s?.(l)))}const c=await r.text(),a=(new DOMParser).parseFromString(c,"text/xml");"gpx"===e&&l.addGpx(a,t),"kml"===e&&l.addKml(a,t),s?.(l)}}catch(r){if(o.signal.aborted)return;c?.(r)}})(),()=>o.abort()},[l,e,n,t,m,s,c]),(0,r.useEffect)(()=>{l&&void 0!==o&&(p.current===l&&f.current&&I(f.current,o)||(l.setStyle(o),f.current=o,p.current=l))},[l,o]);const h=(0,r.useRef)({});return(0,r.useEffect)(()=>{const e={};Object.keys(C).forEach(n=>{const t=u[C[n]];"function"==typeof t&&(e[n]=t)}),h.current=e},[u]),(0,r.useEffect)(()=>{if(!l)return;const e=[];return Object.keys(C).forEach(n=>{const t=naver.maps.Event.addListener(l,n,(...e)=>{h.current[n]?.(...e)});e.push(()=>naver.maps.Event.removeListener(t))}),()=>e.forEach(e=>e())},[l]),null}},8453(e,n,t){t.d(n,{R:()=>c,x:()=>a});var o=t(6540);const r={},s=o.createContext(r);function c(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(s.Provider,{value:n},e.children)}},8478(e,n,t){t.d(n,{A:()=>s});t(6540);var o=t(2303),r=t(4848);function s({children:e,fallback:n}){return(0,o.A)()?(0,r.jsx)(r.Fragment,{children:e?.()}):n??null}},9753(e,n,t){t.d(n,{N:()=>o});const o="qeycp2mj4a"}}]);