---
sidebar_position: 6
---

import { CompleteExample } from "@site/src/components/MapExample";
import BrowserOnly from "@docusaurus/BrowserOnly";

# 완전한 예제

여러 기능을 조합한 완전한 예제입니다.

## 지도 + 마커 + 오버레이 조합

<BrowserOnly>{() => <CompleteExample />}</BrowserOnly>

### 코드

```tsx
import { Map, Marker, Overlay } from "@rousen/react-naver-maps";
import { useState } from "react";

interface Location {
  id: number;
  position: { x: number; y: number };
  title: string;
  address: string;
}

function CompleteExample() {
  const [selectedLocation, setSelectedLocation] = useState<number | null>(null);

  const locations: Location[] = [
    {
      id: 1,
      position: { x: 127.0276, y: 37.4979 },
      title: "강남역",
      address: "서울특별시 강남구 테헤란로",
    },
    {
      id: 2,
      position: { x: 126.978, y: 37.5665 },
      title: "서울역",
      address: "서울특별시 중구 한강대로",
    },
    {
      id: 3,
      position: { x: 126.9223, y: 37.5264 },
      title: "홍대입구",
      address: "서울특별시 마포구 양화로",
    },
  ];

  return (
    <div style={{ width: "100%", height: "500px" }}>
      <Map
        ncpKeyId="your-ncp-key-id"
        mapOptions={{
          center: { x: 127.0276, y: 37.4979 },
          zoom: 12,
        }}
      >
        {locations.map((location) => (
          <div key={location.id}>
            <Marker
              position={location.position}
              onClick={() => setSelectedLocation(location.id)}
            />
            {selectedLocation === location.id && (
              <Overlay
                position={location.position}
                zIndex={100}
                anchor="BOTTOM_CENTER"
              >
                <div
                  style={{
                    background: "white",
                    padding: "15px",
                    borderRadius: "8px",
                    boxShadow: "0 2px 8px rgba(0,0,0,0.15)",
                    minWidth: "200px",
                  }}
                >
                  <h3 style={{ margin: "0 0 10px 0", fontSize: "16px" }}>
                    {location.title}
                  </h3>
                  <p style={{ margin: 0, color: "#666" }}>{location.address}</p>
                  <button
                    onClick={() => setSelectedLocation(null)}
                    style={{
                      marginTop: "10px",
                      padding: "5px 10px",
                      background: "#007bff",
                      color: "white",
                      border: "none",
                      borderRadius: "4px",
                      cursor: "pointer",
                    }}
                  >
                    닫기
                  </button>
                </div>
              </Overlay>
            )}
          </div>
        ))}
      </Map>
    </div>
  );
}

export default CompleteExample;
```

## 지도 + 경로 + 영역 조합

```tsx
import { Map, Marker, Polyline, Polygon } from "@rousen/react-naver-maps";

function RouteAndAreaExample() {
  // 경로 좌표
  const routePath = [
    { x: 127.0276, y: 37.4979 },
    { x: 127.0286, y: 37.4989 },
    { x: 127.0296, y: 37.4999 },
    { x: 127.0306, y: 37.5009 },
  ];

  // 영역 좌표
  const areaPaths = [
    { x: 127.0276, y: 37.4979 },
    { x: 127.0286, y: 37.4979 },
    { x: 127.0286, y: 37.4989 },
    { x: 127.0276, y: 37.4989 },
  ];

  return (
    <div style={{ width: "100%", height: "500px" }}>
      <Map
        ncpKeyId="your-ncp-key-id"
        mapOptions={{
          center: { x: 127.0276, y: 37.4979 },
          zoom: 15,
        }}
      >
        {/* 시작점 마커 */}
        <Marker position={routePath[0]} />

        {/* 경로 */}
        <Polyline
          path={routePath}
          strokeColor="#007bff"
          strokeWeight={5}
          strokeOpacity={0.8}
        />

        {/* 영역 */}
        <Polygon
          paths={areaPaths}
          fillColor="#28a745"
          fillOpacity={0.3}
          strokeColor="#28a745"
          strokeWeight={3}
        />

        {/* 도착점 마커 */}
        <Marker position={routePath[routePath.length - 1]} />
      </Map>
    </div>
  );
}

export default RouteAndAreaExample;
```

## 동적 데이터로 지도 업데이트

```tsx
import { useState, useEffect } from "react";
import { Map, Marker, Polyline } from "@rousen/react-naver-maps";

interface Vehicle {
  id: number;
  position: { x: number; y: number };
  name: string;
}

function DynamicMap() {
  const [vehicles, setVehicles] = useState<Vehicle[]>([]);
  const [route, setRoute] = useState<Array<{ x: number; y: number }>>([]);

  useEffect(() => {
    // 시뮬레이션: 주기적으로 차량 위치 업데이트
    const interval = setInterval(() => {
      setVehicles((prev) =>
        prev.map((vehicle) => ({
          ...vehicle,
          position: {
            x: vehicle.position.x + (Math.random() - 0.5) * 0.001,
            y: vehicle.position.y + (Math.random() - 0.5) * 0.001,
          },
        }))
      );

      // 경로 업데이트
      if (vehicles.length > 0) {
        setRoute((prev) => [
          ...prev,
          {
            x: vehicles[0].position.x,
            y: vehicles[0].position.y,
          },
        ]);
      }
    }, 2000);

    return () => clearInterval(interval);
  }, [vehicles]);

  useEffect(() => {
    // 초기 차량 데이터
    setVehicles([
      {
        id: 1,
        position: { x: 127.0276, y: 37.4979 },
        name: "차량 1",
      },
      {
        id: 2,
        position: { x: 127.0286, y: 37.4989 },
        name: "차량 2",
      },
    ]);
  }, []);

  return (
    <div style={{ width: "100%", height: "500px" }}>
      <Map
        ncpKeyId="your-ncp-key-id"
        mapOptions={{
          center: { x: 127.0276, y: 37.4979 },
          zoom: 15,
        }}
      >
        {/* 경로 표시 */}
        {route.length > 1 && (
          <Polyline path={route} strokeColor="#007bff" strokeWeight={3} />
        )}

        {/* 차량 마커 */}
        {vehicles.map((vehicle) => (
          <Marker key={vehicle.id} position={vehicle.position} />
        ))}
      </Map>
    </div>
  );
}

export default DynamicMap;
```
